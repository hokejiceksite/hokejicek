<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>HOKEJICEK.site</title>
<link rel="icon" href="/H.png">

<style>
:root{
  --bg:#0a0e18;
  --grad:linear-gradient(135deg,#0b1224,#121c38);
  --border:rgba(255,255,255,.08);
  --text:#ffffff;
  --muted:rgba(255,255,255,.7);
  --max:1600px;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
a{text-decoration:none;color:inherit}

/* NAV */
.nav{
  position:sticky;
  top:0;
  z-index:50;
  background:rgba(10,14,24,.9);
  backdrop-filter:blur(10px);
  border-bottom:1px solid var(--border);
}
.nav-inner{
  max-width:var(--max);
  margin:auto;
  padding:14px 16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.brand{font-weight:900;font-size:20px}
.nav-links{display:flex;gap:12px}
.nav-btn{
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 14px;
  border-radius:12px;
  border:1px solid var(--border);
  background:rgba(255,255,255,.04);
  font-weight:700;
}
.nav-btn svg{width:18px;height:18px}

/* LAYOUT */
.wrapper{max-width:var(--max);margin:auto;padding:16px}
.grid{
  display:grid;
  grid-template-columns:320px 1fr 360px;
  gap:16px;
}
@media(max-width:1200px){
  .grid{grid-template-columns:1fr}
}

.panel{
  background:var(--grad);
  border:1px solid var(--border);
  border-radius:18px;
  overflow:hidden;
}
.panel-head{
  padding:14px 16px;
  font-weight:900;
  border-bottom:1px solid var(--border)
}

/* ROZPIS – SCROLL */
.schedule{
  padding:12px;
  display:grid;
  gap:10px;
  height:70vh;
  overflow-y:auto;
}
.schedule::-webkit-scrollbar{width:6px}
.schedule::-webkit-scrollbar-thumb{
  background:#1a1f2e;
  border-radius:6px;
}
.match{
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(0,0,0,.25);
  cursor:pointer
}
.match:hover{background:rgba(255,255,255,.06)}
.match-title{font-weight:800;color:#fff}
.match-meta{font-size:13px;color:var(--muted)}

/* VIDEO */
.player-wrap{padding:20px}
.video{
  width:100%;
  aspect-ratio:16/9;
  border-radius:18px;
  overflow:hidden;
  background:#000;
}
.video iframe{
  width:100%;
  height:100%;
  border:0;
}

/* STREAM BAR – HEZKÝ HORIZONTÁLNÍ SCROLL */
.stream-bar{
  display:flex;
  gap:10px;
  padding:10px 8px;
  overflow-x:auto;
  overflow-y:hidden;
  align-items:center;
  scrollbar-width:thin;
  scrollbar-color:#1a1f2e transparent;
}
.stream-bar::-webkit-scrollbar{height:6px}
.stream-bar::-webkit-scrollbar-track{background:transparent}
.stream-bar::-webkit-scrollbar-thumb{
  background:#1a1f2e;
  border-radius:6px;
}
.stream-bar::-webkit-scrollbar-thumb:hover{
  background:#2b3b6b;
}

.stream-btn{
  min-width:96px;
  height:40px;
  padding:0 14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(180deg,#1a233d,#121a30);
  color:#fff;
  font-weight:800;
  font-size:13px;
  cursor:pointer;
  white-space:nowrap;
  display:flex;
  align-items:center;
  justify-content:center;
}
.stream-btn.active{
  background:linear-gradient(180deg,#2b4cff,#1f3fbf);
  border-color:#4a6cff;
}

/* CHAT – STEJNÁ VÝŠKA JAKO ROZPIS, BEZ SCROLLU */
.chat-body{
  height:70vh;
  overflow:hidden;
}
.chat-body iframe{
  width:100%;
  height:100%;
  border:0;
}
</style>
</head>

<body>

<div class="nav">
  <div class="nav-inner">
    <div class="brand">HOKEJICEK.site</div>
    <div class="nav-links">
      <a class="nav-btn" href="/">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75V21h15V9.75"/>
        </svg>
        Home
      </a>
      <a class="nav-btn" href="/tv">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="7" width="20" height="15" rx="2"/>
          <path d="m17 2-5 5-5-5"/>
        </svg>
        TV
      </a>
    </div>
  </div>
</div>

<div class="wrapper">
  <div class="grid">

    <!-- ROZPIS -->
    <div class="panel">
      <div class="panel-head">Rozpis</div>
      <div class="schedule" id="schedule"></div>
    </div>

    <!-- VIDEO -->
    <div class="panel">
      <div class="panel-head">Přenos</div>
      <div class="player-wrap">
        <div class="video">
          <iframe id="embedPlayer" allowfullscreen></iframe>
        </div>
        <div id="streamButtons" class="stream-bar"></div>
      </div>
    </div>

    <!-- CHAT -->
    <div class="panel">
      <div class="panel-head">Live chat</div>
      <div class="chat-body">
        <iframe src="https://hokejicek.site/livechat"></iframe>
      </div>
    </div>

  </div>
</div>

<script>
const API_URL="https://onhockey.long-mode-0a14.workers.dev/";
const embedEl=document.getElementById("embedPlayer");
const buttons=document.getElementById("streamButtons");
const scheduleBox=document.getElementById("schedule");

function decodeHtml(s){
  const t=document.createElement("textarea");
  t.innerHTML=s;
  return t.value;
}
function fixEmbedUrl(url){
  if(url.startsWith("https://onhockey.tv/")){
    return url.replace("https://onhockey.tv/","https://");
  }
  return url;
}

fetch(API_URL).then(r=>r.json()).then(json=>{
  json.data.forEach(l=>{
    l.games.forEach(g=>{
      const d=document.createElement("div");
      d.className="match";
      d.innerHTML=`
        <div class="match-title">${decodeHtml(g.teams)}</div>
        <div class="match-meta">${l.league} · ${g.time}</div>`;
      d.onclick=()=>{
        buttons.innerHTML="";
        g.links.forEach((l,i)=>{
          const b=document.createElement("button");
          b.className="stream-btn";
          b.textContent=l.label.toUpperCase();
          b.onclick=()=>{
            document.querySelectorAll(".stream-btn").forEach(x=>x.classList.remove("active"));
            b.classList.add("active");
            embedEl.src=fixEmbedUrl(l.url);
          };
          buttons.appendChild(b);
          if(i===0){
            b.classList.add("active");
            embedEl.src=fixEmbedUrl(l.url);
          }
        });
      };
      scheduleBox.appendChild(d);
    });
  });
});
</script>

</body>
</html>
