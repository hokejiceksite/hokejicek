  <!-- ğŸ”¥ Firebase logika -->
  <script>
    // Inicializace Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDzLNoTKVC8GfcZsARHlmlgmF2eXlC858c",
      authDomain: "hokejicek-streamy.firebaseapp.com",
      databaseURL: "https://hokejicek-streamy-default-rtdb.firebaseio.com/",
      projectId: "hokejicek-streamy",
      storageBucket: "hokejicek-streamy.firebasestorage.app",
      messagingSenderId: "747005458237",
      appId: "1:747005458237:web:835917780e34b1f1757754"
    };

    // âš™ï¸ SpuÅ¡tÄ›nÃ­ Firebase
    firebase.initializeApp(firebaseConfig);

    // ğŸ§± Inicializace sluÅ¾eb (musÃ­ bÃ½t hned po initializeApp)
    const auth = firebase.auth();
    const db = firebase.database();

    // ğŸ§© Teprve potom definujeme zbytek logiky
    const loginBox = document.getElementById("loginBox");
    const adminPanel = document.getElementById("adminPanel");
    const table = document.getElementById("streamTable");
    const statusText = document.getElementById("status");

    // âœ… Kontrola pÅ™ipojenÃ­ k databÃ¡zi
    db.ref(".info/connected").on("value", (snap) => {
      statusText.textContent = snap.val()
        ? "âœ… PÅ™ipojeno k Firebase"
        : "âŒ NepÅ™ipojeno";
    });

    // ğŸ”‘ PÅ™ihlÃ¡Å¡enÃ­
    function login() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      // Ujisti se, Å¾e je Firebase naÄteno
      if (!auth) {
        alert("âŒ Firebase Auth se nenaÄetlo sprÃ¡vnÄ›. Zkontroluj skripty nahoÅ™e.");
        return;
      }

      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          console.log("âœ… PÅ™ihlÃ¡Å¡enÃ­ OK");
          loginBox.style.display = "none";
          adminPanel.style.display = "block";
          loadStreams();
        })
        .catch(error => {
          console.error("âŒ Chyba pÅ™ihlÃ¡Å¡enÃ­:", error);
          document.getElementById("errorMsg").textContent =
            "âŒ Firebase hlÃ¡sÃ­: " + error.code + " â€“ " + error.message;
        });
    }

    // ğŸšª OdhlÃ¡Å¡enÃ­
    function logout() {
      auth.signOut().then(() => location.reload());
    }

    // ğŸ“¡ NaÄtenÃ­ streamÅ¯
    function loadStreams() {
      table.innerHTML = "";
      for (let i = 1; i <= 20; i++) {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td><a href="/stream${i}.html" target="_blank">/stream${i}</a></td>
          <td><input id="input${i}" type="text" placeholder="VloÅ¾ odkaz..."></td>
          <td><button onclick="saveStream(${i})">ğŸ’¾</button></td>
        `;
        table.appendChild(tr);

        db.ref("streams/stream" + i).on("value", (snapshot) => {
          const val = snapshot.val();
          if (val && val.url) document.getElementById("input" + i).value = val.url;
        });
      }
    }

    // ğŸ’¾ UloÅ¾enÃ­ streamu
    function saveStream(num) {
      const input = document.getElementById("input" + num).value;
      db.ref("streams/stream" + num).set({ url: input });
      alert(`âœ… Stream ${num} uloÅ¾en.`);
    }
  </script>
