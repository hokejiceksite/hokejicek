<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.compiled.js"></script>

<style>
html,body{margin:0;width:100%;height:100%;background:#000}
video{width:100%;height:100%;object-fit:contain}
</style>
</head>
<body>

<video id="v" autoplay controls playsinline></video>

<script>
const WORKER_URL = "https://hokejiceksite.long-mode-0a14.workers.dev/";

(async () => {
  if (!shaka.Player.isBrowserSupported()) return;

  const video = document.getElementById("v");
  const player = new shaka.Player(video);

  const mpd = await fetch(WORKER_URL).then(r => r.text());

  if (!mpd.startsWith("http")) {
    console.error("MPD error:", mpd);
    return;
  }

  await player.load(mpd);

  video.onclick = () => {
    if (!document.fullscreenElement)
      video.requestFullscreen().catch(()=>{});
  };
})();
</script>

</body>
</html>
