<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<script id="aclib" type="text/javascript" src="//acscdn.com/script/aclib.js"></script>

<script src="https://cdn.jsdelivr.net/npm/shaka-player@4.10.5/dist/shaka-player.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shaka-player@4.10.5/dist/controls.min.css">

<style>
html, body{
  margin:0;
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
}

#container{
  position:fixed;
  inset:0;
  background:#000;
}

.shaka-video-container{
  width:100%;
  height:100%;
}

video{
  width:100%;
  height:100%;
  object-fit:contain;
  background:#000;
}
</style>
</head>
<body>

<div id="container" data-shaka-player-container>
  <video id="v" data-shaka-player autoplay playsinline></video>
</div>

<script>
const WORKER_URL = "https://ctsport.long-mode-0a14.workers.dev";

(async () => {
  shaka.polyfill.installAll();
  if (!shaka.Player.isBrowserSupported()) return;

  const video = document.getElementById("v");
  const container = document.getElementById("container");

  const player = new shaka.Player(video);
  const ui = new shaka.ui.Overlay(player, container, video);

  player.configure({
    abr: {
      enabled: true,
      defaultBandwidthEstimate: 1e9
    },
    restrictions: {
      maxWidth: Infinity,
      maxHeight: Infinity,
      maxPixels: Infinity
    },
    streaming: {
      rebufferingGoal: 2,
      bufferingGoal: 10
    }
  });

  const url = await fetch(WORKER_URL, { cache: "no-store" }).then(r => r.text());

  if (!url || !url.trim().startsWith("http")) return;

  await player.load(url.trim());

  video.addEventListener("click", () => {
    if (!document.fullscreenElement) {
      container.requestFullscreen().catch(()=>{});
    }
  });

  try { await video.play(); } catch(e) {}
})();
</script>

<script type="text/javascript">
  aclib.runAutoTag({
    zoneId: 'zitkptgwk8'
  });
</script>

</body>
</html>
