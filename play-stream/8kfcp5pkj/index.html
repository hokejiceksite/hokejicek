<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hokej√≠ƒçek ‚Äî Stream</title>

<!-- Clappr + HLS plugin -->
<script src="https://cdn.jsdelivr.net/npm/@clappr/player@latest/dist/clappr.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@clappr/hlsjs-playback@latest/dist/hlsjs-playback.min.js"></script>

<!-- üîπ Reklamn√≠ skript (Hlaviƒçka) -->
<script id="aclib" type="text/javascript" src="//acscdn.com/script/aclib.js"></script>

<style>
  html,body{
    height:100%;
    margin:0;
    background:#000;
    color:#fff;
    font-family:system-ui;
    overflow:hidden;
  }
  #player{
    width:100%;
    height:100vh;
  }
  #loading{
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    color:#fff;
    font-size:18px;
    background:rgba(0,0,0,0.5);
    padding:12px 18px;
    border-radius:8px;
    z-index:1000;
  }
</style>
</head>
<body>
  <div id="player"></div>
  <div id="loading">Naƒç√≠t√°n√≠ streamu...</div>

<script>
/* ====== NASTAVEN√ç (jen zde mƒõnit) ====== */
const M3U8 = "https://stream-48.mazana.tv/V2_emn.m3u8s?codec_id=1240&session=omg";
/* ======================================= */

/* üö´ Blokace prav√©ho tlaƒç√≠tka, v√Ωbƒõru textu, kop√≠rov√°n√≠ */
['contextmenu','selectstart','copy','cut','dragstart'].forEach(ev=>{
  document.addEventListener(ev, e=>e.preventDefault(), {capture:true});
});

/* ‚õî Blokace zkratek (F12, Ctrl+U, Ctrl+Shift+I/J/C/K, Ctrl+S, atd.) */
document.addEventListener('keydown', function(e){
  const key = (e.key || '').toUpperCase();
  if (
    key === 'F12' ||
    (e.ctrlKey && e.shiftKey && ['I','J','C','K'].includes(key)) ||
    (e.ctrlKey && ['U','S','P'].includes(key)) ||
    (e.metaKey && e.shiftKey && ['I','J','C','K'].includes(key))
  ){
    e.preventDefault();
    e.stopPropagation();
    return false;
  }
}, true);

/* üß© Funkce pro otestov√°n√≠ dostupnosti manifestu */
async function testManifest(url){
  try {
    const resp = await fetch(url, { method: 'GET', cache: 'no-store' });
    if (!resp.ok) return false;
    const text = await resp.text();
    return text.startsWith('#EXTM3U');
  } catch {
    return false;
  }
}

/* üöÄ Inicializace p≈ôehr√°vaƒçe */
async function start(){
  const loading = document.getElementById('loading');
  const manifestOk = await testManifest(M3U8);

  if (!manifestOk){
    if (loading) loading.textContent = "‚ö†Ô∏è Nelze naƒç√≠st stream (CORS nebo 403)";
    return;
  }

  try {
    const player = new Clappr.Player({
      parentId: '#player',
      source: M3U8,
      plugins: [HlsjsPlayback],
      mimeType: "application/x-mpegURL",
      width: '100%',
      height: '100%',
      autoPlay: true,
      mute: false,
    });

    player.on(Clappr.Events.PLAYER_READY, ()=> {
      if (loading) loading.style.display = 'none';
    });

    player.on(Clappr.Events.PLAYER_ERROR, ()=> {
      if (loading) loading.textContent = "‚ùå Chyba p≈ôehr√°v√°n√≠.";
    });

  } catch (err) {
    if (loading) loading.textContent = "‚ùå Nelze inicializovat p≈ôehr√°vaƒç.";
    console.error(err);
  }
}

start();
</script>

<!-- üîπ Reklamn√≠ skript (Patiƒçka) -->
<script type="text/javascript">
  aclib.runAutoTag({
      zoneId: 'zitkptgwk8'
  });
</script>

</body>
</html>
